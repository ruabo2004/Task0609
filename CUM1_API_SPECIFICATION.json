{
  "cụm1_authentication_apis": {
    "base_url": "http://localhost:5000/api",
    "endpoints": {
      "register": {
        "method": "POST",
        "url": "/customers/register",
        "description": "Đăng ký tài khoản khách hàng mới",
        "headers": {
          "Content-Type": "application/json"
        },
        "request_body": {
          "full_name": {
            "type": "string",
            "required": true,
            "min_length": 2,
            "max_length": 50,
            "example": "Nguyễn Văn An"
          },
          "email": {
            "type": "string",
            "required": true,
            "format": "email",
            "unique": true,
            "example": "nguyenvanan@email.com"
          },
          "password": {
            "type": "string",
            "required": true,
            "min_length": 6,
            "example": "password123"
          },
          "confirm_password": {
            "type": "string",
            "required": true,
            "must_match": "password",
            "example": "password123"
          },
          "phone": {
            "type": "string",
            "required": true,
            "format": "vietnamese_phone",
            "pattern": "^[0-9]{10,11}$",
            "example": "0901234567"
          },
          "date_of_birth": {
            "type": "date",
            "required": false,
            "format": "YYYY-MM-DD",
            "min_age": 18,
            "example": "1990-05-15"
          },
          "gender": {
            "type": "string",
            "required": false,
            "enum": ["male", "female", "other"],
            "example": "male"
          },
          "address": {
            "type": "string",
            "required": false,
            "max_length": 255,
            "example": "123 Đường ABC, Quận 1, TP.HCM"
          }
        },
        "response_success": {
          "status": 201,
          "body": {
            "success": true,
            "message": "Customer registered successfully",
            "data": {
              "customer": {
                "customer_id": 1,
                "full_name": "Nguyễn Văn An",
                "email": "nguyenvanan@email.com",
                "phone": "0901234567",
                "date_of_birth": "1990-05-15",
                "gender": "male",
                "address": "123 Đường ABC, Quận 1, TP.HCM",
                "email_verified": false,
                "phone_verified": false,
                "status": "active",
                "created_at": "2025-01-15T10:30:00.000Z"
              },
              "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            }
          }
        },
        "response_errors": [
          {
            "status": 400,
            "body": {
              "success": false,
              "message": "Validation errors",
              "errors": [
                {
                  "field": "email",
                  "message": "Email không hợp lệ"
                }
              ]
            }
          },
          {
            "status": 409,
            "body": {
              "success": false,
              "message": "Email already registered"
            }
          }
        ]
      },
      
      "login": {
        "method": "POST",
        "url": "/customers/login",
        "description": "Đăng nhập vào hệ thống",
        "headers": {
          "Content-Type": "application/json"
        },
        "request_body": {
          "email": {
            "type": "string",
            "required": true,
            "format": "email",
            "example": "nguyenvanan@email.com"
          },
          "password": {
            "type": "string",
            "required": true,
            "example": "password123"
          },
          "remember_me": {
            "type": "boolean",
            "required": false,
            "default": false,
            "example": true
          }
        },
        "response_success": {
          "status": 200,
          "body": {
            "success": true,
            "message": "Login successful",
            "data": {
              "customer": {
                "customer_id": 1,
                "full_name": "Nguyễn Văn An",
                "email": "nguyenvanan@email.com",
                "phone": "0901234567",
                "date_of_birth": "1990-05-15",
                "gender": "male",
                "address": "123 Đường ABC, Quận 1, TP.HCM",
                "email_verified": false,
                "phone_verified": false,
                "status": "active"
              },
              "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            }
          }
        },
        "response_errors": [
          {
            "status": 401,
            "body": {
              "success": false,
              "message": "Invalid email or password"
            }
          },
          {
            "status": 403,
            "body": {
              "success": false,
              "message": "Account is deactivated"
            }
          }
        ]
      },

      "logout": {
        "method": "POST",
        "url": "/customers/logout",
        "description": "Đăng xuất khỏi hệ thống",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer {token}"
        },
        "request_body": {},
        "response_success": {
          "status": 200,
          "body": {
            "success": true,
            "message": "Logout successful"
          }
        }
      },

      "get_profile": {
        "method": "GET",
        "url": "/customers/profile",
        "description": "Lấy thông tin profile của khách hàng",
        "headers": {
          "Authorization": "Bearer {token}"
        },
        "response_success": {
          "status": 200,
          "body": {
            "success": true,
            "data": {
              "customer": {
                "customer_id": 1,
                "full_name": "Nguyễn Văn An",
                "email": "nguyenvanan@email.com",
                "phone": "0901234567",
                "date_of_birth": "1990-05-15",
                "gender": "male",
                "address": "123 Đường ABC, Quận 1, TP.HCM",
                "id_number": "123456789",
                "profile_image": "https://example.com/profile.jpg",
                "email_verified": false,
                "phone_verified": false,
                "status": "active",
                "created_at": "2025-01-15T10:30:00.000Z",
                "updated_at": "2025-01-15T10:30:00.000Z"
              }
            }
          }
        },
        "response_errors": [
          {
            "status": 401,
            "body": {
              "success": false,
              "message": "Unauthorized access"
            }
          }
        ]
      },

      "update_profile": {
        "method": "PUT",
        "url": "/customers/profile",
        "description": "Cập nhật thông tin profile",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer {token}"
        },
        "request_body": {
          "full_name": {
            "type": "string",
            "required": false,
            "min_length": 2,
            "max_length": 50,
            "example": "Nguyễn Văn An Updated"
          },
          "phone": {
            "type": "string",
            "required": false,
            "format": "vietnamese_phone",
            "example": "0909876543"
          },
          "date_of_birth": {
            "type": "date",
            "required": false,
            "format": "YYYY-MM-DD",
            "example": "1990-05-15"
          },
          "gender": {
            "type": "string",
            "required": false,
            "enum": ["male", "female", "other"],
            "example": "male"
          },
          "address": {
            "type": "string",
            "required": false,
            "max_length": 255,
            "example": "456 Đường XYZ, Quận 3, TP.HCM"
          },
          "id_number": {
            "type": "string",
            "required": false,
            "max_length": 50,
            "example": "123456789012"
          }
        },
        "response_success": {
          "status": 200,
          "body": {
            "success": true,
            "message": "Profile updated successfully",
            "data": {
              "customer": {
                "customer_id": 1,
                "full_name": "Nguyễn Văn An Updated",
                "email": "nguyenvanan@email.com",
                "phone": "0909876543",
                "date_of_birth": "1990-05-15",
                "gender": "male",
                "address": "456 Đường XYZ, Quận 3, TP.HCM",
                "updated_at": "2025-01-15T11:30:00.000Z"
              }
            }
          }
        }
      },

      "change_password": {
        "method": "PUT",
        "url": "/customers/change-password",
        "description": "Đổi mật khẩu",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer {token}"
        },
        "request_body": {
          "current_password": {
            "type": "string",
            "required": true,
            "example": "old_password"
          },
          "new_password": {
            "type": "string",
            "required": true,
            "min_length": 6,
            "example": "new_password"
          },
          "confirm_password": {
            "type": "string",
            "required": true,
            "must_match": "new_password",
            "example": "new_password"
          }
        },
        "response_success": {
          "status": 200,
          "body": {
            "success": true,
            "message": "Password changed successfully"
          }
        },
        "response_errors": [
          {
            "status": 400,
            "body": {
              "success": false,
              "message": "Current password is incorrect"
            }
          },
          {
            "status": 400,
            "body": {
              "success": false,
              "message": "New password must be different from current password"
            }
          }
        ]
      }
    }
  },

  "frontend_implementation_guide": {
    "required_packages": [
      "react-hook-form@^7.46.1",
      "react-router-dom@^6.15.0", 
      "react-toastify@^9.1.3",
      "axios@^1.5.0"
    ],

    "folder_structure": {
      "components/Form/": [
        "Input.js",
        "Button.js", 
        "FormError.js",
        "PasswordInput.js"
      ],
      "components/Auth/": [
        "LoginForm.js",
        "RegisterForm.js", 
        "ProfileForm.js",
        "ChangePasswordForm.js",
        "ProtectedRoute.js"
      ],
      "contexts/": [
        "AuthContext.js"
      ],
      "pages/": [
        "Login.js",
        "Register.js",
        "Profile.js"
      ],
      "services/": [
        "authService.js"
      ],
      "utils/": [
        "validation.js",
        "authHelpers.js"
      ]
    },

    "key_features": [
      "Form validation with react-hook-form",
      "JWT token management",
      "Auto-logout on token expiry",
      "Password strength indicator", 
      "Remember me functionality",
      "Profile image upload",
      "Responsive design",
      "Error handling",
      "Loading states",
      "Toast notifications"
    ],

    "validation_rules": {
      "email": {
        "pattern": "^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$",
        "message": "Email không hợp lệ"
      },
      "phone": {
        "pattern": "^[0-9]{10,11}$",
        "message": "Số điện thoại phải có 10-11 chữ số"
      },
      "password": {
        "min_length": 6,
        "message": "Mật khẩu phải có ít nhất 6 ký tự"
      },
      "full_name": {
        "min_length": 2,
        "max_length": 50,
        "message": "Họ tên phải từ 2-50 ký tự"
      }
    },

    "error_messages": {
      "network_error": "Lỗi kết nối mạng. Vui lòng thử lại.",
      "server_error": "Lỗi máy chủ. Vui lòng thử lại sau.",
      "validation_error": "Dữ liệu không hợp lệ.",
      "unauthorized": "Bạn không có quyền truy cập.",
      "session_expired": "Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại.",
      "email_exists": "Email đã được sử dụng.",
      "invalid_credentials": "Email hoặc mật khẩu không đúng.",
      "account_deactivated": "Tài khoản đã bị vô hiệu hóa."
    },

    "success_messages": {
      "register_success": "Đăng ký tài khoản thành công!",
      "login_success": "Đăng nhập thành công!",
      "logout_success": "Đăng xuất thành công!",
      "profile_updated": "Cập nhật thông tin thành công!",
      "password_changed": "Đổi mật khẩu thành công!"
    },

    "storage_keys": {
      "auth_token": "homestay_auth_token",
      "user_data": "homestay_user_data",
      "remember_me": "homestay_remember_me"
    },

    "routing_setup": {
      "public_routes": [
        "/",
        "/login", 
        "/register",
        "/rooms",
        "/rooms/:id"
      ],
      "protected_routes": [
        "/profile",
        "/booking-history",
        "/bookings",
        "/payment"
      ],
      "redirect_after_login": "/",
      "redirect_after_logout": "/"
    },

    "styling_framework": {
      "recommendation": "Tailwind CSS",
      "alternative": "Custom CSS with BEM methodology",
      "responsive_breakpoints": {
        "mobile": "640px",
        "tablet": "768px", 
        "desktop": "1024px"
      }
    },

    "security_considerations": [
      "Input sanitization",
      "XSS prevention",
      "JWT token expiration handling",
      "Auto-logout on token expiry",
      "Secure password requirements",
      "Rate limiting on login attempts",
      "HTTPS in production"
    ]
  },

  "testing_data": {
    "valid_accounts": [
      {
        "email": "nguyenvanan@email.com",
        "password": "password123",
        "full_name": "Nguyễn Văn An"
      },
      {
        "email": "tranthibinh@email.com", 
        "password": "password123",
        "full_name": "Trần Thị Bình"
      },
      {
        "email": "leminhcuong@email.com",
        "password": "password123", 
        "full_name": "Lê Minh Cường"
      }
    ],

    "test_scenarios": [
      {
        "name": "Successful Registration",
        "input": {
          "full_name": "Test User",
          "email": "testuser@example.com",
          "password": "password123",
          "confirm_password": "password123",
          "phone": "0909123456"
        },
        "expected_result": "201 Created with token"
      },
      {
        "name": "Email Already Exists",
        "input": {
          "email": "nguyenvanan@email.com"
        },
        "expected_result": "409 Conflict"
      },
      {
        "name": "Invalid Email Format",
        "input": {
          "email": "invalid-email"
        },
        "expected_result": "400 Validation Error"
      },
      {
        "name": "Password Too Short",
        "input": {
          "password": "123"
        },
        "expected_result": "400 Validation Error"
      },
      {
        "name": "Successful Login",
        "input": {
          "email": "nguyenvanan@email.com",
          "password": "password123"
        },
        "expected_result": "200 OK with token"
      },
      {
        "name": "Invalid Credentials",
        "input": {
          "email": "nguyenvanan@email.com",
          "password": "wrongpassword"
        },
        "expected_result": "401 Unauthorized"
      }
    ]
  }
}


