{
  "cụm3_booking_system_apis": {
    "base_url": "http://localhost:5000/api",
    "authentication": "Required for all endpoints - Bearer token in Authorization header",
    "endpoints": {
      "create_booking": {
        "method": "POST",
        "url": "/bookings",
        "description": "Tạo booking mới cho khách hàng",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer {token}"
        },
        "request_body": {
          "room_id": {
            "type": "integer",
            "required": true,
            "description": "ID của phòng muốn đặt",
            "example": 1
          },
          "check_in_date": {
            "type": "date",
            "required": true,
            "format": "YYYY-MM-DD",
            "description": "Ngày check-in",
            "validation": "Phải từ ngày hôm nay trở đi",
            "example": "2025-01-20"
          },
          "check_out_date": {
            "type": "date",
            "required": true,
            "format": "YYYY-MM-DD",
            "description": "Ngày check-out",
            "validation": "Phải sau ngày check-in",
            "example": "2025-01-23"
          },
          "num_adults": {
            "type": "integer",
            "required": true,
            "min": 1,
            "max": 10,
            "description": "Số người lớn",
            "example": 2
          },
          "num_children": {
            "type": "integer",
            "required": false,
            "min": 0,
            "max": 5,
            "default": 0,
            "description": "Số trẻ em",
            "example": 0
          },
          "special_requests": {
            "type": "string",
            "required": false,
            "max_length": 500,
            "description": "Yêu cầu đặc biệt",
            "example": "Phòng tầng cao, view biển"
          },
          "additional_services": {
            "type": "array",
            "required": false,
            "description": "Danh sách dịch vụ thêm",
            "items": {
              "service_id": {
                "type": "integer",
                "description": "ID dịch vụ"
              },
              "quantity": {
                "type": "integer",
                "min": 1,
                "description": "Số lượng"
              },
              "service_date": {
                "type": "date",
                "format": "YYYY-MM-DD",
                "description": "Ngày sử dụng dịch vụ"
              },
              "service_time": {
                "type": "time",
                "format": "HH:MM",
                "description": "Giờ sử dụng dịch vụ"
              },
              "notes": {
                "type": "string",
                "description": "Ghi chú cho dịch vụ"
              }
            },
            "example": [
              {
                "service_id": 1,
                "quantity": 2,
                "service_date": "2025-01-21",
                "service_time": "19:00",
                "notes": "Massage cho 2 người"
              }
            ]
          }
        },
        "response_success": {
          "status": 201,
          "body": {
            "success": true,
            "message": "Booking created successfully",
            "data": {
              "booking": {
                "booking_id": 1,
                "booking_code": "BK20250120000001",
                "customer_id": 1,
                "room_id": 1,
                "room_name": "Standard Garden View",
                "type_name": "Standard Room",
                "check_in_date": "2025-01-20",
                "check_out_date": "2025-01-23",
                "total_nights": 3,
                "num_adults": 2,
                "num_children": 0,
                "base_amount": 1500000,
                "tax_amount": 150000,
                "service_fee": 50000,
                "discount_amount": 0,
                "total_amount": 1700000,
                "special_requests": "Phòng tầng cao, view biển",
                "booking_source": "website",
                "booking_status": "pending",
                "payment_status": "pending",
                "created_at": "2025-01-15T10:30:00.000Z",
                "room_details": {
                  "room_number": "101",
                  "floor_number": 1,
                  "view_type": "garden",
                  "bed_type": "double",
                  "amenities": ["WiFi miễn phí", "Điều hòa", "TV LCD"],
                  "images": ["room101_1.jpg", "room101_2.jpg"]
                },
                "additional_services": [
                  {
                    "service_id": 1,
                    "service_name": "Massage Thư Giãn",
                    "quantity": 2,
                    "unit_price": 300000,
                    "total_price": 600000,
                    "service_date": "2025-01-21",
                    "service_time": "19:00",
                    "status": "pending"
                  }
                ],
                "pricing_breakdown": {
                  "base_nights": 3,
                  "weekend_nights": 0,
                  "holiday_nights": 0,
                  "base_price_per_night": 500000,
                  "weekend_price_per_night": 600000,
                  "holiday_price_per_night": 700000,
                  "nightly_breakdown": [
                    {
                      "date": "2025-01-20",
                      "day_type": "weekday",
                      "price": 500000
                    },
                    {
                      "date": "2025-01-21",
                      "day_type": "weekday",
                      "price": 500000
                    },
                    {
                      "date": "2025-01-22",
                      "day_type": "weekday",
                      "price": 500000
                    }
                  ]
                }
              }
            }
          }
        },
        "response_errors": [
          {
            "status": 400,
            "body": {
              "success": false,
              "message": "Validation errors",
              "errors": [
                {
                  "field": "check_in_date",
                  "message": "Check-in date cannot be in the past"
                }
              ]
            }
          },
          {
            "status": 400,
            "body": {
              "success": false,
              "message": "Room is not available for the selected dates"
            }
          },
          {
            "status": 404,
            "body": {
              "success": false,
              "message": "Room not found"
            }
          },
          {
            "status": 400,
            "body": {
              "success": false,
              "message": "Guest count exceeds room capacity",
              "details": {
                "max_occupancy": 2,
                "requested_guests": 3
              }
            }
          }
        ]
      },

      "get_customer_bookings": {
        "method": "GET",
        "url": "/bookings",
        "description": "Lấy danh sách booking của khách hàng hiện tại",
        "headers": {
          "Authorization": "Bearer {token}"
        },
        "query_parameters": {
          "page": {
            "type": "integer",
            "required": false,
            "default": 1,
            "min": 1,
            "description": "Số trang",
            "example": 1
          },
          "limit": {
            "type": "integer",
            "required": false,
            "default": 10,
            "min": 1,
            "max": 50,
            "description": "Số lượng booking mỗi trang",
            "example": 10
          },
          "status": {
            "type": "string",
            "required": false,
            "enum": ["pending", "confirmed", "checked_in", "checked_out", "cancelled", "no_show", "all"],
            "default": "all",
            "description": "Lọc theo trạng thái booking",
            "example": "confirmed"
          },
          "date_from": {
            "type": "date",
            "required": false,
            "format": "YYYY-MM-DD",
            "description": "Lọc booking từ ngày",
            "example": "2025-01-01"
          },
          "date_to": {
            "type": "date",
            "required": false,
            "format": "YYYY-MM-DD",
            "description": "Lọc booking đến ngày",
            "example": "2025-12-31"
          },
          "sort_by": {
            "type": "string",
            "required": false,
            "enum": ["created_at", "check_in_date", "total_amount"],
            "default": "created_at",
            "description": "Sắp xếp theo",
            "example": "check_in_date"
          },
          "sort_order": {
            "type": "string",
            "required": false,
            "enum": ["asc", "desc"],
            "default": "desc",
            "description": "Thứ tự sắp xếp",
            "example": "desc"
          }
        },
        "response_success": {
          "status": 200,
          "body": {
            "success": true,
            "message": "Customer bookings retrieved successfully",
            "data": {
              "bookings": [
                {
                  "booking_id": 1,
                  "booking_code": "BK20250120000001",
                  "room_id": 1,
                  "room_name": "Standard Garden View",
                  "type_name": "Standard Room",
                  "room_number": "101",
                  "check_in_date": "2025-01-20",
                  "check_out_date": "2025-01-23",
                  "total_nights": 3,
                  "num_adults": 2,
                  "num_children": 0,
                  "total_amount": 1700000,
                  "booking_status": "confirmed",
                  "payment_status": "partial",
                  "created_at": "2025-01-15T10:30:00.000Z",
                  "confirmed_at": "2025-01-15T11:00:00.000Z",
                  "room_image": "room101_1.jpg",
                  "can_cancel": true,
                  "can_modify": true,
                  "cancellation_deadline": "2025-01-19T23:59:59.000Z"
                }
              ],
              "pagination": {
                "page": 1,
                "limit": 10,
                "total": 5,
                "totalPages": 1,
                "hasNext": false,
                "hasPrev": false
              },
              "summary": {
                "total_bookings": 5,
                "pending_bookings": 1,
                "confirmed_bookings": 3,
                "completed_bookings": 1,
                "cancelled_bookings": 0,
                "total_spent": 8500000,
                "upcoming_checkins": 2
              }
            }
          }
        }
      },

      "get_booking_by_id": {
        "method": "GET",
        "url": "/bookings/{booking_id}",
        "description": "Lấy chi tiết booking theo ID",
        "headers": {
          "Authorization": "Bearer {token}"
        },
        "path_parameters": {
          "booking_id": {
            "type": "integer",
            "required": true,
            "description": "ID của booking",
            "example": 1
          }
        },
        "response_success": {
          "status": 200,
          "body": {
            "success": true,
            "message": "Booking retrieved successfully",
            "data": {
              "booking": {
                "booking_id": 1,
                "booking_code": "BK20250120000001",
                "customer_id": 1,
                "customer_name": "Nguyễn Văn An",
                "customer_email": "nguyenvanan@email.com",
                "customer_phone": "0901234567",
                "room_id": 1,
                "room_name": "Standard Garden View",
                "room_number": "101",
                "type_name": "Standard Room",
                "floor_number": 1,
                "view_type": "garden",
                "bed_type": "double",
                "room_size": 25.5,
                "max_occupancy": 2,
                "check_in_date": "2025-01-20",
                "check_out_date": "2025-01-23",
                "total_nights": 3,
                "num_adults": 2,
                "num_children": 0,
                "base_amount": 1500000,
                "tax_amount": 150000,
                "service_fee": 50000,
                "discount_amount": 0,
                "total_amount": 1700000,
                "special_requests": "Phòng tầng cao, view biển",
                "guest_notes": "",
                "staff_notes": "",
                "booking_source": "website",
                "booking_status": "confirmed",
                "payment_status": "partial",
                "cancellation_reason": null,
                "cancelled_at": null,
                "cancelled_by": null,
                "confirmed_at": "2025-01-15T11:00:00.000Z",
                "confirmed_by": 1,
                "checked_in_at": null,
                "checked_out_at": null,
                "created_at": "2025-01-15T10:30:00.000Z",
                "updated_at": "2025-01-15T11:00:00.000Z",
                "room_details": {
                  "amenities": ["WiFi miễn phí", "Điều hòa", "TV LCD", "Tủ lạnh mini"],
                  "images": ["room101_1.jpg", "room101_2.jpg"],
                  "bathroom_type": "private",
                  "wifi_available": true,
                  "ac_available": true,
                  "tv_available": true,
                  "fridge_available": true,
                  "balcony_available": false,
                  "smoking_allowed": false,
                  "pet_allowed": false
                },
                "additional_services": [
                  {
                    "booking_service_id": 1,
                    "service_id": 1,
                    "service_name": "Massage Thư Giãn",
                    "service_type": "spa",
                    "quantity": 2,
                    "unit_price": 300000,
                    "total_price": 600000,
                    "service_date": "2025-01-21",
                    "service_time": "19:00",
                    "status": "pending",
                    "notes": "Massage cho 2 người"
                  }
                ],
                "pricing_breakdown": {
                  "base_nights": 3,
                  "weekend_nights": 0,
                  "holiday_nights": 0,
                  "base_price_per_night": 500000,
                  "weekend_price_per_night": 600000,
                  "holiday_price_per_night": 700000,
                  "nightly_breakdown": [
                    {
                      "date": "2025-01-20",
                      "day_type": "weekday",
                      "price": 500000
                    },
                    {
                      "date": "2025-01-21",
                      "day_type": "weekday",
                      "price": 500000
                    },
                    {
                      "date": "2025-01-22",
                      "day_type": "weekday",
                      "price": 500000
                    }
                  ],
                  "service_breakdown": [
                    {
                      "service_name": "Massage Thư Giãn",
                      "quantity": 2,
                      "unit_price": 300000,
                      "total_price": 600000
                    }
                  ]
                },
                "payment_summary": {
                  "total_amount": 1700000,
                  "paid_amount": 850000,
                  "pending_amount": 850000,
                  "payment_methods": ["momo"],
                  "last_payment_date": "2025-01-15T12:00:00.000Z"
                },
                "actions_available": {
                  "can_cancel": true,
                  "can_modify": true,
                  "can_check_in": false,
                  "can_check_out": false,
                  "cancellation_policy": "free_cancellation_24h",
                  "modification_deadline": "2025-01-18T23:59:59.000Z",
                  "cancellation_deadline": "2025-01-19T23:59:59.000Z"
                },
                "contact_info": {
                  "reception_phone": "+84 123 456 789",
                  "reception_email": "reception@homestay.com",
                  "emergency_contact": "+84 987 654 321"
                }
              }
            }
          }
        },
        "response_errors": [
          {
            "status": 404,
            "body": {
              "success": false,
              "message": "Booking not found"
            }
          },
          {
            "status": 403,
            "body": {
              "success": false,
              "message": "Access denied - This booking does not belong to you"
            }
          }
        ]
      },

      "cancel_booking": {
        "method": "PUT",
        "url": "/bookings/{booking_id}/cancel",
        "description": "Hủy booking (chỉ cho booking pending hoặc confirmed)",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer {token}"
        },
        "path_parameters": {
          "booking_id": {
            "type": "integer",
            "required": true,
            "description": "ID của booking cần hủy",
            "example": 1
          }
        },
        "request_body": {
          "cancellation_reason": {
            "type": "string",
            "required": false,
            "max_length": 500,
            "description": "Lý do hủy booking",
            "example": "Thay đổi kế hoạch du lịch"
          },
          "refund_requested": {
            "type": "boolean",
            "required": false,
            "default": true,
            "description": "Có yêu cầu hoàn tiền không",
            "example": true
          }
        },
        "response_success": {
          "status": 200,
          "body": {
            "success": true,
            "message": "Booking cancelled successfully",
            "data": {
              "booking": {
                "booking_id": 1,
                "booking_code": "BK20250120000001",
                "booking_status": "cancelled",
                "payment_status": "refunded",
                "cancellation_reason": "Thay đổi kế hoạch du lịch",
                "cancelled_at": "2025-01-16T14:30:00.000Z",
                "cancelled_by": 1,
                "updated_at": "2025-01-16T14:30:00.000Z"
              },
              "refund_info": {
                "refund_eligible": true,
                "refund_amount": 1530000,
                "cancellation_fee": 170000,
                "refund_method": "original_payment_method",
                "estimated_refund_time": "3-5 business days",
                "refund_policy": "free_cancellation_24h"
              }
            }
          }
        },
        "response_errors": [
          {
            "status": 400,
            "body": {
              "success": false,
              "message": "Cannot cancel booking - Check-in is within 24 hours",
              "details": {
                "current_status": "confirmed",
                "check_in_date": "2025-01-17T14:00:00.000Z",
                "hours_until_checkin": 12,
                "cancellation_policy": "Cannot cancel within 24 hours of check-in"
              }
            }
          },
          {
            "status": 400,
            "body": {
              "success": false,
              "message": "Booking cannot be cancelled",
              "details": {
                "current_status": "checked_in",
                "reason": "Guest has already checked in"
              }
            }
          }
        ]
      },

      "calculate_booking_cost": {
        "method": "POST",
        "url": "/bookings/calculate-cost",
        "description": "Tính toán chi phí booking trước khi tạo (không cần authentication)",
        "headers": {
          "Content-Type": "application/json"
        },
        "request_body": {
          "room_id": {
            "type": "integer",
            "required": true,
            "description": "ID của phòng",
            "example": 1
          },
          "check_in_date": {
            "type": "date",
            "required": true,
            "format": "YYYY-MM-DD",
            "description": "Ngày check-in",
            "example": "2025-01-20"
          },
          "check_out_date": {
            "type": "date",
            "required": true,
            "format": "YYYY-MM-DD",
            "description": "Ngày check-out",
            "example": "2025-01-23"
          },
          "num_adults": {
            "type": "integer",
            "required": false,
            "default": 1,
            "min": 1,
            "description": "Số người lớn",
            "example": 2
          },
          "num_children": {
            "type": "integer",
            "required": false,
            "default": 0,
            "min": 0,
            "description": "Số trẻ em",
            "example": 0
          },
          "additional_services": {
            "type": "array",
            "required": false,
            "description": "Danh sách dịch vụ thêm",
            "items": {
              "service_id": "integer",
              "quantity": "integer"
            },
            "example": [
              {
                "service_id": 1,
                "quantity": 2
              }
            ]
          },
          "promo_code": {
            "type": "string",
            "required": false,
            "description": "Mã khuyến mãi",
            "example": "WELCOME2025"
          }
        },
        "response_success": {
          "status": 200,
          "body": {
            "success": true,
            "message": "Booking cost calculated successfully",
            "data": {
              "pricing": {
                "room_id": 1,
                "check_in_date": "2025-01-20",
                "check_out_date": "2025-01-23",
                "total_nights": 3,
                "num_adults": 2,
                "num_children": 0,
                "base_amount": 1500000,
                "service_amount": 600000,
                "subtotal": 2100000,
                "tax_rate": 10,
                "tax_amount": 210000,
                "discount_amount": 0,
                "service_fee": 50000,
                "total_amount": 2360000,
                "currency": "VND",
                "pricing_breakdown": {
                  "base_nights": 3,
                  "weekend_nights": 0,
                  "holiday_nights": 0,
                  "base_price_per_night": 500000,
                  "weekend_price_per_night": 600000,
                  "holiday_price_per_night": 700000,
                  "nightly_rates": [
                    {
                      "date": "2025-01-20",
                      "day_type": "weekday",
                      "rate": 500000,
                      "is_peak": false
                    },
                    {
                      "date": "2025-01-21",
                      "day_type": "weekday",
                      "rate": 500000,
                      "is_peak": false
                    },
                    {
                      "date": "2025-01-22",
                      "day_type": "weekday",
                      "rate": 500000,
                      "is_peak": false
                    }
                  ]
                },
                "service_breakdown": [
                  {
                    "service_id": 1,
                    "service_name": "Massage Thư Giãn",
                    "quantity": 2,
                    "unit_price": 300000,
                    "total_price": 600000
                  }
                ],
                "promo_code_applied": null,
                "discount_details": null,
                "payment_options": [
                  {
                    "method": "full_payment",
                    "amount": 2360000,
                    "description": "Thanh toán toàn bộ"
                  },
                  {
                    "method": "deposit",
                    "amount": 1180000,
                    "description": "Đặt cọc 50%",
                    "remaining": 1180000,
                    "due_date": "2025-01-20"
                  }
                ],
                "cancellation_policy": {
                  "free_cancellation_hours": 24,
                  "cancellation_fees": [
                    {
                      "hours_before_checkin": 72,
                      "fee_percentage": 0,
                      "description": "Miễn phí hủy nếu hủy trước 72 giờ"
                    },
                    {
                      "hours_before_checkin": 48,
                      "fee_percentage": 25,
                      "description": "Phí hủy 25% nếu hủy trong vòng 48-72 giờ"
                    },
                    {
                      "hours_before_checkin": 24,
                      "fee_percentage": 50,
                      "description": "Phí hủy 50% nếu hủy trong vòng 24-48 giờ"
                    },
                    {
                      "hours_before_checkin": 0,
                      "fee_percentage": 100,
                      "description": "Không hoàn tiền nếu hủy trong vòng 24 giờ"
                    }
                  ]
                }
              }
            }
          }
        },
        "response_errors": [
          {
            "status": 400,
            "body": {
              "success": false,
              "message": "Invalid promo code",
              "details": {
                "promo_code": "INVALID2025",
                "reason": "Promo code not found or expired"
              }
            }
          },
          {
            "status": 400,
            "body": {
              "success": false,
              "message": "Room not available for selected dates",
              "details": {
                "room_id": 1,
                "conflicting_dates": ["2025-01-21", "2025-01-22"]
              }
            }
          }
        ]
      }
    }
  },

  "frontend_implementation_guide": {
    "required_packages": [
      "react-hook-form@^7.46.1",
      "react-query@^3.39.3",
      "react-datepicker@^4.16.0",
      "date-fns@^2.30.0",
      "react-router-dom@^6.15.0",
      "react-toastify@^9.1.3"
    ],

    "folder_structure": {
      "components/Booking/": [
        "BookingForm.js",
        "BookingSummary.js",
        "BookingCard.js",
        "BookingList.js",
        "BookingStatus.js",
        "BookingActions.js",
        "GuestDetails.js",
        "SpecialRequests.js",
        "ServiceSelector.js",
        "BookingTimeline.js"
      ],
      "components/Pricing/": [
        "PriceBreakdown.js",
        "PriceCalculator.js",
        "DiscountApplier.js",
        "TotalSummary.js"
      ],
      "components/Calendar/": [
        "AvailabilityCalendar.js",
        "DateRangeSelector.js",
        "BlockedDatesIndicator.js"
      ],
      "pages/": [
        "CreateBooking.js",
        "BookingHistory.js",
        "BookingDetail.js",
        "BookingConfirmation.js"
      ],
      "hooks/": [
        "useBooking.js",
        "useBookingForm.js",
        "usePriceCalculation.js",
        "useBookingValidation.js"
      ],
      "services/": [
        "bookingService.js"
      ],
      "utils/": [
        "bookingHelpers.js",
        "dateValidation.js",
        "priceCalculation.js"
      ]
    },

    "booking_form_steps": {
      "step_1": {
        "title": "Thông tin cơ bản",
        "fields": [
          "check_in_date",
          "check_out_date",
          "num_adults",
          "num_children"
        ],
        "validation": [
          "Date range validation",
          "Guest count validation",
          "Room capacity check"
        ]
      },
      "step_2": {
        "title": "Dịch vụ & Yêu cầu",
        "fields": [
          "additional_services",
          "special_requests"
        ],
        "validation": [
          "Service availability check",
          "Text length validation"
        ]
      },
      "step_3": {
        "title": "Xác nhận & Thanh toán",
        "fields": [
          "booking_summary",
          "terms_acceptance",
          "payment_method"
        ],
        "validation": [
          "Terms acceptance required",
          "Payment method selection"
        ]
      }
    },

    "booking_status_flow": {
      "pending": {
        "label": "Chờ xác nhận",
        "color": "orange",
        "icon": "⏳",
        "actions": ["cancel", "modify"],
        "next_states": ["confirmed", "cancelled"]
      },
      "confirmed": {
        "label": "Đã xác nhận",
        "color": "blue",
        "icon": "✅",
        "actions": ["cancel", "check_in"],
        "next_states": ["checked_in", "cancelled", "no_show"]
      },
      "checked_in": {
        "label": "Đã nhận phòng",
        "color": "green",
        "icon": "🏠",
        "actions": ["check_out"],
        "next_states": ["checked_out"]
      },
      "checked_out": {
        "label": "Đã trả phòng",
        "color": "gray",
        "icon": "✈️",
        "actions": ["review"],
        "next_states": []
      },
      "cancelled": {
        "label": "Đã hủy",
        "color": "red",
        "icon": "❌",
        "actions": [],
        "next_states": []
      },
      "no_show": {
        "label": "Không xuất hiện",
        "color": "red",
        "icon": "👻",
        "actions": [],
        "next_states": []
      }
    },

    "validation_rules": {
      "check_in_date": {
        "required": true,
        "min_date": "today",
        "max_advance_days": 365,
        "message": "Ngày check-in không hợp lệ"
      },
      "check_out_date": {
        "required": true,
        "min_date": "check_in_date + 1",
        "max_stay_days": 30,
        "message": "Ngày check-out phải sau ngày check-in"
      },
      "num_adults": {
        "required": true,
        "min": 1,
        "max": "room.max_occupancy",
        "message": "Số người lớn không hợp lệ"
      },
      "num_children": {
        "required": false,
        "min": 0,
        "max": 5,
        "total_guests_max": "room.max_occupancy",
        "message": "Số trẻ em không hợp lệ"
      },
      "special_requests": {
        "required": false,
        "max_length": 500,
        "message": "Yêu cầu đặc biệt quá dài"
      }
    },

    "price_calculation": {
      "real_time": true,
      "debounce_ms": 500,
      "cache_duration": 300000,
      "components": [
        "Base room rate (per night)",
        "Weekend/holiday surcharge",
        "Additional services",
        "Taxes (10%)",
        "Service fees",
        "Discounts/promotions"
      ],
      "display_format": {
        "currency": "VND",
        "locale": "vi-VN",
        "show_breakdown": true,
        "show_per_night": true
      }
    },

    "booking_actions": {
      "cancel": {
        "availability": {
          "statuses": ["pending", "confirmed"],
          "min_hours_before_checkin": 24
        },
        "confirmation": {
          "required": true,
          "show_cancellation_fee": true,
          "reason_required": false
        },
        "process": [
          "Show cancellation policy",
          "Calculate cancellation fee",
          "Confirm cancellation",
          "Process refund",
          "Send confirmation"
        ]
      },
      "modify": {
        "availability": {
          "statuses": ["pending", "confirmed"],
          "min_hours_before_checkin": 48
        },
        "allowed_changes": [
          "dates (subject to availability)",
          "guest_count (within room capacity)",
          "additional_services",
          "special_requests"
        ],
        "restrictions": [
          "Cannot change room type",
          "Price difference may apply",
          "New dates must be available"
        ]
      }
    },

    "mobile_optimization": {
      "responsive_breakpoints": {
        "mobile": "320px - 767px",
        "tablet": "768px - 1023px",
        "desktop": "1024px+"
      },
      "mobile_features": [
        "Single-column form layout",
        "Touch-friendly date picker",
        "Swipe navigation between steps",
        "Compact booking cards",
        "Bottom sheet for actions",
        "Progressive web app support"
      ]
    },

    "accessibility": {
      "features": [
        "Screen reader support",
        "Keyboard navigation",
        "High contrast mode",
        "Focus indicators",
        "ARIA labels",
        "Skip links"
      ],
      "compliance": "WCAG 2.1 AA"
    }
  },

  "testing_data": {
    "sample_bookings": [
      {
        "booking_id": 1,
        "booking_code": "BK20250120000001",
        "room_name": "Standard Garden View",
        "check_in_date": "2025-01-20",
        "check_out_date": "2025-01-23",
        "total_nights": 3,
        "num_adults": 2,
        "num_children": 0,
        "total_amount": 1700000,
        "booking_status": "confirmed",
        "payment_status": "partial"
      },
      {
        "booking_id": 2,
        "booking_code": "BK20250125000002",
        "room_name": "Deluxe Sea View",
        "check_in_date": "2025-02-01",
        "check_out_date": "2025-02-05",
        "total_nights": 4,
        "num_adults": 2,
        "num_children": 1,
        "total_amount": 3200000,
        "booking_status": "pending",
        "payment_status": "pending"
      }
    ],

    "test_scenarios": [
      {
        "name": "Create Booking - Success",
        "endpoint": "POST /bookings",
        "payload": {
          "room_id": 1,
          "check_in_date": "2025-01-20",
          "check_out_date": "2025-01-23",
          "num_adults": 2,
          "num_children": 0
        },
        "expected_result": "201 Created with booking details"
      },
      {
        "name": "Create Booking - Room Unavailable",
        "endpoint": "POST /bookings",
        "payload": {
          "room_id": 1,
          "check_in_date": "2025-01-15",
          "check_out_date": "2025-01-18"
        },
        "expected_result": "400 Bad Request - Room not available"
      },
      {
        "name": "Get Customer Bookings",
        "endpoint": "GET /bookings?status=confirmed&page=1&limit=10",
        "expected_result": "200 OK with booking list and pagination"
      },
      {
        "name": "Cancel Booking - Success",
        "endpoint": "PUT /bookings/1/cancel",
        "payload": {
          "cancellation_reason": "Change of plans"
        },
        "expected_result": "200 OK with cancellation details"
      },
      {
        "name": "Cancel Booking - Too Late",
        "endpoint": "PUT /bookings/1/cancel",
        "expected_result": "400 Bad Request - Cannot cancel within 24 hours"
      },
      {
        "name": "Calculate Cost",
        "endpoint": "POST /bookings/calculate-cost",
        "payload": {
          "room_id": 1,
          "check_in_date": "2025-01-20",
          "check_out_date": "2025-01-23",
          "num_adults": 2
        },
        "expected_result": "200 OK with detailed pricing breakdown"
      }
    ]
  },

  "performance_considerations": {
    "caching_strategy": {
      "booking_list": "Cache for 2 minutes",
      "booking_detail": "Cache for 5 minutes",
      "price_calculation": "Cache for 5 minutes",
      "room_availability": "Cache for 1 minute"
    },
    
    "optimization_tips": [
      "Use React Query for booking data management",
      "Implement optimistic updates for status changes",
      "Debounce price calculations",
      "Preload next page of bookings",
      "Use skeleton loaders for better UX",
      "Implement infinite scroll for mobile",
      "Cache calculated prices locally",
      "Use service workers for offline support"
    ],

    "error_handling": [
      "Network connectivity issues",
      "Server timeout errors",
      "Validation failures",
      "Authentication expiry",
      "Room availability conflicts",
      "Payment processing errors"
    ]
  }
}


